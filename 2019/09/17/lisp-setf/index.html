<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>setf 中 「f」 的本意 | NIL</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.8d7c9c93.css" as="style"><link rel="preload" href="/assets/js/app.1bc9c4b2.js" as="script"><link rel="preload" href="/assets/js/4.3623162e.js" as="script"><link rel="preload" href="/assets/js/5.01fa82bf.js" as="script"><link rel="preload" href="/assets/js/14.a4f4c54e.js" as="script"><link rel="prefetch" href="/assets/js/1.8cf47d9f.js"><link rel="prefetch" href="/assets/js/10.9c95be4e.js"><link rel="prefetch" href="/assets/js/11.1d1a5d83.js"><link rel="prefetch" href="/assets/js/12.e06dd46f.js"><link rel="prefetch" href="/assets/js/13.82bd8097.js"><link rel="prefetch" href="/assets/js/15.52fc6e9d.js"><link rel="prefetch" href="/assets/js/16.1379f379.js"><link rel="prefetch" href="/assets/js/17.059975a5.js"><link rel="prefetch" href="/assets/js/18.8cc69377.js"><link rel="prefetch" href="/assets/js/19.ecc651c2.js"><link rel="prefetch" href="/assets/js/20.75ac69b7.js"><link rel="prefetch" href="/assets/js/21.0ba8fddc.js"><link rel="prefetch" href="/assets/js/6.b4898728.js"><link rel="prefetch" href="/assets/js/7.4032b5ee.js"><link rel="prefetch" href="/assets/js/8.843bf780.js"><link rel="prefetch" href="/assets/js/9.c18d5d6f.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.c949d70e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8d7c9c93.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuperess-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">NIL
        </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">首页</a></li><li class="nav-item"><a href="/tag/" class="nav-link">标签</a></li><li class="nav-item"><a href="/about.html" class="nav-link">关于</a></li><li class="nav-item"><a href="/links.html" class="nav-link">友情链接</a></li><li class="nav-item"><a href="https://cireu.github.io/rss.xml" target="_blank" rel="noopener noreferrer" class="nav-link external">RSS</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">NIL
      </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">首页</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">标签</a></li><li class="mobile-nav-item"><a href="/about.html" class="nav-link">关于</a></li><li class="mobile-nav-item"><a href="/links.html" class="nav-link">友情链接</a></li><li class="mobile-nav-item"><a href="https://cireu.github.io/rss.xml" target="_blank" rel="noopener noreferrer" class="nav-link external">RSS</a></li></ul></div></div></div> <div class="content-wrapper"><div id="vuperess-theme-blog__post-layout"><div class="vuepress-blog-theme-content"><div class="content__default"><h1 id="setf-中-「f」-的本意"><a href="#setf-中-「f」-的本意" class="header-anchor">#</a> setf 中 「f」 的本意</h1> <h2 id="setf-car-cons-cdr"><a href="#setf-car-cons-cdr" class="header-anchor">#</a> (setf (car cons) 'cdr)</h2> <p>大多数人第一眼见到 <code>setf</code> ，可能会简单的把 f 理解成 form。这种解释很符合直觉，因为我
们已经有了对 symbol 进行赋值操作的 <code>setq</code> 。而 <code>setf</code>  可以对 form（广义变量）进行赋值。</p> <p>然而这个直觉是错误的。 Deutsch 在他的论文《A Lisp machine with very compact
programs》中（<a href="http://www.softwarepreservation.org/projects/LISP/interlisp-d/Deutsch-3IJCAI.pdf" target="_blank" rel="noopener noreferrer">原文<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）提到</p> <blockquote><p>A more useful function is (SETFQ (fn arg1 ... argn) newvalue)
which quotes the function name and evaluates everything else.
This allows RPLACA, for example, to be defined as (LAMBDA (X Y) (SETFQ (CAR X) Y) ).</p></blockquote> <p>这里面提到的 <code>rplaca</code>  在 Elisp 里叫做 <code>setcar</code></p> <p>所以 <code>setf</code>  是 <code>setfq</code>  的缩写，f 的意思是 function。 另外在这篇论文中我们也可以看到 MicroLisp 引入了现在我们使用的广义变量的概念</p> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <p><a href="https://g000001.cddddr.org/3715857294" target="_blank" rel="noopener noreferrer">原博客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <hr> <!----></div> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#setf-car-cons-cdr" title="(setf (car cons) 'cdr)">(setf (car cons) 'cdr)</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#参考" title="参考">参考</a></div></div></div></div> <footer class="footer" data-v-5317f8db><div class="footer-left-wrap" data-v-5317f8db><ul class="contact" data-v-5317f8db></ul></div> <div class="footer-right-wrap" data-v-5317f8db><ul class="copyright" data-v-5317f8db></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1bc9c4b2.js" defer></script><script src="/assets/js/4.3623162e.js" defer></script><script src="/assets/js/5.01fa82bf.js" defer></script><script src="/assets/js/14.a4f4c54e.js" defer></script>
  </body>
</html>
